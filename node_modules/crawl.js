
var cheerio = require('cheerio');
var request = require('request');
var mongo = require('mongo');
var db1 = require('db');


module.exports = {


	crawl_site_gsmarena: function(url,brand){
			
			
		request(url, function(error,response,html){

			if(!error && response.statusCode == 200){
				var $ = cheerio.load(html);

		
				var products = $('.makers ul li');
		
				products.each(function(i,element){
					
					var href = products.eq(i).find('a').attr('href');
					var src = products.eq(i).find('img').attr('src');
					var title = products.eq(i).find('strong').text();
					var desc = products.eq(i).find('img').attr('title');
					console.log(href + '\n' + src + '\n' + title +'\n' + desc);
					db1.add_product(title,desc,src,"phone",brand);						

					
				});

			}


		});



	}


}